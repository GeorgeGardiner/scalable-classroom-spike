(function(e){function t(t){for(var r,s,a=t[0],o=t[1],l=t[2],d=0,b=[];d<a.length;d++)s=a[d],Object.prototype.hasOwnProperty.call(c,s)&&c[s]&&b.push(c[s][0]),c[s]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);u&&u(t);while(b.length)b.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var o=n[a];0!==c[o]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},c={app:0},i=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],o=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var u=o;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"388c":function(e,t,n){"use strict";n("7f44")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),c={class:"row g-0"};function i(e,t,n,i,s,a){var o=Object(r["resolveComponent"])("MultiDeviceControlPanel"),l=Object(r["resolveComponent"])("DeviceIndex");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",c,[Object(r["createVNode"])(o,{onSendMessage:t[0]||(t[0]=function(e){return a.sendMessage(e)}),onOpenWebsite:t[1]||(t[1]=function(e){return a.openWebsite(e)}),onLockScreen:t[2]||(t[2]=function(e){return a.lockScreen(e)}),onUnlockScreen:t[3]||(t[3]=function(e){return a.unlockScreen(e)}),onDisableWeb:t[4]||(t[4]=function(e){return a.disableWeb(e)}),onEnableWeb:t[5]||(t[5]=function(e){return a.enableWeb(e)}),onSetBlockList:t[6]||(t[6]=function(e){return a.setBlockList(e)}),onSetAllowList:t[7]||(t[7]=function(e){return a.setAllowList(e)}),onClearBlockList:t[8]||(t[8]=function(e){return a.clearBlockList()}),onClearAllowList:t[9]||(t[9]=function(e){return a.clearAllowList()})}),Object(r["createVNode"])(l,{ref:"devices","api-base":e.apiBase},null,8,["api-base"])])}var s=n("1da1"),a=(n("96cf"),n("d3b7"),n("e9c4"),n("a15b"),Object(r["createElementVNode"])("header",{class:"d-flex align-items-center justify-content-center mb-5"},[Object(r["createElementVNode"])("h1",null,"Backdrop Hub")],-1)),o={class:"mb-3"},l=Object(r["createElementVNode"])("label",{class:"form-label"},"Send Message",-1),u={class:"input-group input-group-sm"},d={class:"mb-3"},b=Object(r["createElementVNode"])("label",{class:"form-label"},"Open Website",-1),p={class:"input-group input-group-sm"},h={class:"mb-3"},m=Object(r["createElementVNode"])("label",{class:"form-label"},"Screens",-1),f={class:"btn-group d-flex"},v={class:"mb-3"},g=Object(r["createElementVNode"])("label",{class:"form-label"},"Browser",-1),O={class:"btn-group d-flex"},j={class:"mb-3"},y=Object(r["createElementVNode"])("label",{class:"form-label"},[Object(r["createTextVNode"])("Block Websites "),Object(r["createElementVNode"])("small",{class:"text-sm-end"},"(1 per line)")],-1),w={class:"d-flex justify-content-end"},k={class:"mb-3"},S=Object(r["createElementVNode"])("label",{class:"form-label"},"Allow Websites",-1),x={class:"d-flex justify-content-end"};function N(e,t,n,c,i,s){return Object(r["openBlock"])(),Object(r["createElementBlock"])("aside",null,[a,Object(r["createElementVNode"])("nav",null,[Object(r["createElementVNode"])("div",o,[l,Object(r["createElementVNode"])("div",u,[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.message=t})},null,512),[[r["vModelText"],e.message]]),Object(r["createElementVNode"])("span",{class:"btn btn-primary input-group-text",onClick:t[1]||(t[1]=function(){return s.sendMessage&&s.sendMessage.apply(s,arguments)})},"Send")])]),Object(r["createElementVNode"])("div",d,[b,Object(r["createElementVNode"])("div",p,[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.website=t})},null,512),[[r["vModelText"],e.website]]),Object(r["createElementVNode"])("span",{class:"btn btn-primary input-group-text",onClick:t[3]||(t[3]=function(){return s.openWebsite&&s.openWebsite.apply(s,arguments)})},"Send")])]),Object(r["createElementVNode"])("div",h,[m,Object(r["createElementVNode"])("div",f,[Object(r["createElementVNode"])("div",{class:"btn btn-sm btn-outline-danger",onClick:t[4]||(t[4]=function(){return s.lockScreen&&s.lockScreen.apply(s,arguments)})},"Lock"),Object(r["createElementVNode"])("div",{class:"btn btn-sm btn-outline-success",onClick:t[5]||(t[5]=function(){return s.unlockScreen&&s.unlockScreen.apply(s,arguments)})},"Unlock")])]),Object(r["createElementVNode"])("div",v,[g,Object(r["createElementVNode"])("div",O,[Object(r["createElementVNode"])("div",{class:"btn btn-sm btn-outline-danger",onClick:t[6]||(t[6]=function(){return s.disableWeb&&s.disableWeb.apply(s,arguments)})},"Disable"),Object(r["createElementVNode"])("div",{class:"btn btn-sm btn-outline-success",onClick:t[7]||(t[7]=function(){return s.enableWeb&&s.enableWeb.apply(s,arguments)})},"Enable")])]),Object(r["createElementVNode"])("div",j,[y,Object(r["withDirectives"])(Object(r["createElementVNode"])("textarea",{class:"form-control",rows:"5","onUpdate:modelValue":t[8]||(t[8]=function(t){return e.blockList=t})},null,512),[[r["vModelText"],e.blockList]]),Object(r["createElementVNode"])("div",w,[Object(r["createElementVNode"])("span",{class:"btn btn-sm btn-danger mt-2 me-2",onClick:t[9]||(t[9]=function(){return s.clearBlockList&&s.clearBlockList.apply(s,arguments)})},"Clear"),Object(r["createElementVNode"])("span",{class:"btn btn-sm btn-primary mt-2",onClick:t[10]||(t[10]=function(){return s.setBlockList&&s.setBlockList.apply(s,arguments)})},"Apply")])]),Object(r["createElementVNode"])("div",k,[S,Object(r["withDirectives"])(Object(r["createElementVNode"])("textarea",{class:"form-control",rows:"5","onUpdate:modelValue":t[11]||(t[11]=function(t){return e.allowList=t})},null,512),[[r["vModelText"],e.allowList]]),Object(r["createElementVNode"])("div",x,[Object(r["createElementVNode"])("span",{class:"btn btn-sm btn-danger mt-2 me-2",onClick:t[12]||(t[12]=function(){return s.clearAllowList&&s.clearAllowList.apply(s,arguments)})},"Clear"),Object(r["createElementVNode"])("span",{class:"btn btn-sm btn-primary mt-2",onClick:t[13]||(t[13]=function(){return s.setAllowList&&s.setAllowList.apply(s,arguments)})},"Apply")])])])])}n("ac1f"),n("1276");var V={name:"MultiDeviceControlPanel",data:function(){return{message:"",website:"",blockList:"",allowList:""}},methods:{sendMessage:function(){this.$emit("send-message",{message:this.message})},openWebsite:function(){this.$emit("open-website",{url:this.website})},lockScreen:function(){this.$emit("lock-screen")},unlockScreen:function(){this.$emit("unlock-screen")},disableWeb:function(){this.$emit("disable-web")},enableWeb:function(){this.$emit("enable-web")},setBlockList:function(){this.$emit("set-block-list",{sites:this.blockList.split(/\r\n|\r|\n/g)})},clearBlockList:function(){this.$emit("clear-block-list")},setAllowList:function(){this.$emit("set-allow-list",{sites:this.allowList.split(/\r\n|\r|\n/g)})},clearAllowList:function(){this.$emit("clear-allow-list")}}},E=(n("c663"),n("6b0d")),B=n.n(E);const L=B()(V,[["render",N]]);var C=L,D=Object(r["createElementVNode"])("header",{class:"d-flex align-items-center justify-content-center mb-5"},[Object(r["createElementVNode"])("h1",null,"Classroom")],-1),T={class:"container-fluid"},I={class:"row"};function R(e,t,n,c,i,s){var a=Object(r["resolveComponent"])("device-thumb");return Object(r["openBlock"])(),Object(r["createElementBlock"])("main",null,[D,Object(r["createElementVNode"])("div",T,[Object(r["createElementVNode"])("div",I,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.devices,(function(e){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:e.id,class:"col-sm-4 mb-4"},[Object(r["createVNode"])(a,{"device-id":e.id,onToggleSelect:t[0]||(t[0]=function(e){return s.toggleSelect(e)})},null,8,["device-id"])])})),128))])])])}n("a434");var A=n("65ba"),_=n.n(A),W={class:"device-thumb"},M={class:"ar-1-1",ref:"target"},$={key:0,src:_.a},P=["src"];function F(e,t,n,c,i,s){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",W,[Object(r["createElementVNode"])("div",M,[e.thumbAvailable?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("img",$)),e.thumbAvailable?(Object(r["openBlock"])(),Object(r["createElementBlock"])("img",{key:1,src:e.thumbDataUrl},null,8,P)):Object(r["createCommentVNode"])("",!0),Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.isSelected=t}),onChange:t[1]||(t[1]=function(){return s.toggleSelect&&s.toggleSelect.apply(s,arguments)})},null,544),[[r["vModelCheckbox"],e.isSelected]])],512),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(n.deviceId)+" "+Object(r["toDisplayString"])(c.targetIsVisible),1)])}n("aff5"),n("a9e3");var U=n("2c28"),J="https://5lcpg07jce.execute-api.eu-west-2.amazonaws.com",z={name:"DeviceThumb",props:["hubBase","deviceId","selected"],setup:function(){var e=Object(r["ref"])(null),t=Object(U["useElementVisibility"])(e);return{target:e,targetIsVisible:t}},data:function(){return{isSelected:this.selected,thumbRefreshInterval:null,thumbAvailable:!1,thumbInFlight:!1,thumbDataUrl:""}},methods:{toggleSelect:function(){this.$emit("toggle-select",{device_id:this.deviceId,selected:this.isSelected})},refreshThumb:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n,r,c=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!1!==this.targetIsVisible){e.next=3;break}return this.thumbAvailable=!1,e.abrupt("return");case 3:if(!1!==this.thumbInFlight){e.next=25;break}return this.thumbInFlight=!0,e.prev=5,e.next=8,fetch(J+"/thumb/"+this.deviceId+"?cachebuster="+Math.random()*Number.MAX_SAFE_INTEGER);case 8:if(t=e.sent,!t.ok){e.next=18;break}return e.next=12,t.blob();case 12:n=e.sent,r=new FileReader,r.onload=function(e){c.thumbDataUrl=e.target.result,c.thumbInFlight=!1,c.thumbAvailable=!0},r.readAsDataURL(n),e.next=19;break;case 18:this.thumbAvailable=!1;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](5),this.thumbAvailable=!1;case 24:this.thumbInFlight=!1;case 25:case"end":return e.stop()}}),e,this,[[5,21]])})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.thumbRefreshInterval=setInterval(this.refreshThumb,1e3)},beforeUnmount:function(){clearInterval(this.thumbRefreshInterval),this.thumbInFlight=!1}};n("bc13");const G=B()(z,[["render",F]]);var H=G,X={name:"DeviceIndex",components:{DeviceThumb:H},props:["apiBase"],data:function(){return{pollInterval:null,pollInFlight:!1,devices:[]}},methods:{pollDevices:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n,r,c,i,s,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==this.pollInFlight){e.next=2;break}return e.abrupt("return");case 2:return this.pollInFlight=!0,e.prev=3,e.next=6,fetch(this.apiBase+"/devices");case 6:if(t=e.sent,!t||!t.ok){e.next=14;break}return e.next=10,t.json();case 10:for(n=e.sent,r=!1,c=0;c<n.device_ids.length;c++){for(r=!1,i=0;i<this.devices.length;i++)n.device_ids[c]===this.devices[i].id&&(r=!0);!1===r&&this.devices.push({id:n.device_ids[c],selected:!1})}for(s=0;s<this.devices.length;s++){for(a=!0,o=0;o<n.device_ids.length;o++)this.devices[s].id===n.device_ids[o]&&(a=!1);!0===a&&this.devices.splice(s,1)}case 14:e.next=18;break;case 16:e.prev=16,e.t0=e["catch"](3);case 18:this.pollInFlight=!1;case 19:case"end":return e.stop()}}),e,this,[[3,16]])})));function t(){return e.apply(this,arguments)}return t}(),toggleSelect:function(e){for(var t=0;t<this.devices.length;t++)this.devices[t].id===e.device_id&&(this.devices[t].selected=e.selected)},getSelectedDevices:function(){for(var e=[],t=0;t<this.devices.length;t++)!0===this.devices[t].selected&&e.push(this.devices[t].id);return e}},created:function(){this.pollInterval=setInterval(this.pollDevices,5e3),this.pollDevices()},beforeUnmount:function(){clearInterval(this.pollInterval),this.pollInFlight=!1}};const q=B()(X,[["render",R]]);var K=q,Q={name:"App",components:{MultiDeviceControlPanel:C,DeviceIndex:K},data:function(){return{apiBase:"https://5lcpg07jce.execute-api.eu-west-2.amazonaws.com"}},methods:{sendMessage:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.$refs.devices.getSelectedDevices(),e.next=3,fetch(this.apiBase+"/message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_ids:n,payload:{method:"send_message",payload:{title:"Message from Scalable Classroom",body:t.message}}})});case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),openWebsite:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.$refs.devices.getSelectedDevices(),e.next=3,fetch(this.apiBase+"/message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_ids:n,payload:{method:"open_website",payload:{url:t.url}}})});case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),lockScreen:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$refs.devices.getSelectedDevices(),e.next=3,fetch(this.apiBase+"/twin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_ids:t,payload:{lockScreen:!0}})});case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),unlockScreen:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$refs.devices.getSelectedDevices(),e.next=3,fetch(this.apiBase+"/twin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_ids:t,payload:{lockScreen:!1}})});case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),disableWeb:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$refs.devices.getSelectedDevices(),e.next=3,fetch(this.apiBase+"/twin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_ids:t,payload:{disableWeb:!0}})});case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),enableWeb:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$refs.devices.getSelectedDevices(),e.next=3,fetch(this.apiBase+"/twin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_ids:t,payload:{disableWeb:!1}})});case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setBlockList:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return alert("Set block"+t.sites.join(",")),n=this.$refs.devices.getSelectedDevices(),e.next=4,fetch(this.apiBase+"/twin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_ids:n,payload:{blockList:t.sites}})});case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),clearBlockList:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$refs.devices.getSelectedDevices(),e.next=3,fetch(this.apiBase+"/twin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_ids:t,payload:{blockList:null}})});case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setAllowList:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.$refs.devices.getSelectedDevices(),e.next=3,fetch(this.apiBase+"/twin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_ids:n,payload:{allowList:t.sites}})});case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),clearAllowList:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$refs.devices.getSelectedDevices(),e.next=3,fetch(this.apiBase+"/twin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_ids:t,payload:{allowList:null}})});case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}};n("388c");const Y=B()(Q,[["render",i]]);var Z=Y;n("ab8b");Object(r["createApp"])(Z).mount("#app")},"65ba":function(e,t,n){e.exports=n.p+"img/no-connection.719464cf.gif"},"79de":function(e,t,n){},"7f44":function(e,t,n){},a1fc:function(e,t,n){},bc13:function(e,t,n){"use strict";n("79de")},c663:function(e,t,n){"use strict";n("a1fc")}});
//# sourceMappingURL=app.242e79f1.js.map